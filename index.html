<!DOCTYPE html>10.40.3.105
<html>
	<head>
	<meta charset="UTF-8" />
		<title>Hueveras de cartón 2</title>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/phaser/3.87.0/phaser.min.js"></script>
	
<script>
let canvas_w = 800;
let canvas_h = 450;
let config = {
 width: canvas_w,
 height: canvas_h,
 scene: {
  preload: precarga,
  create: crea,
  update: actualiza
 }
};
let game = new Phaser.Game(config);
let huevom;
let huevom_dir = 1;

let huevera_b, huevera_m, huevera_d;
let huevo_b, huevo_m, huevo_d;
let background;
let straw;


function precarga ()
{
	huevera_b = this.load.image('huevera_b', 'huevera_b.png');
	huevo_b = this.load.image('huevo_b', 'huevo_b.png');
	huevera_m = this.load.image('huevera_m', 'huevera_m.png');
	huevo_m = this.load.image('huevo_m', 'huevo_m.png');
	huevo_d = this.load.image('huevo_d', 'huevo_d.png');
	huevera_d = this.load.image('huevera_d', 'huevera_d.png');
	background = this.load.image('background', 'grass_bg.png');
	straw = this.load.image('straw', 'straw_bg.png');
}

let x_b = Math.floor((Math.random() * 400) + 200);
let x_m = Math.floor((Math.random() * 400) + 200);
let x_d = Math.floor((Math.random() * 400) + 200);

let dir_b = Math.floor((Math.random() * 0.8) + 0.3);
let dir_m = Math.floor((Math.random() * 0.8) + 0.3);
let dir_d = Math.floor((Math.random() * 0.8) + 0.3);

function crea ()
{

	background = this.add.image(80, 0, 'background');
	background.setScale(2);

	straw = this.add.image(90, 200, 'straw');
	straw.setScale(0.5, 0.4);
	straw.angle = 90;

	huevera_b = this.add.image(80, 100, 'huevera_b');
	huevera_b.setScale(.5);

	huevera_m = this.add.image(80, 200, 'huevera_m');
	huevera_m.setScale(.5);
	
	huevera_d = this.add.image(80, 300, 'huevera_d');
	huevera_d.setScale(.5);

	huevo_b = this.add.image(x_b, 50, 'huevo_b');
	huevo_m = this.add.image(x_m, 50, 'huevo_m');
	huevo_d = this.add.image(x_d, 50, 'huevo_d');
	
	huevo_b.setScale(1.1);
	huevo_m.setScale(1.1);
	huevo_d.setScale(1.1);

	huevo_b.setInteractive({draggable:true});
	huevo_m.setInteractive();
	huevo_d.setInteractive();

	huevo_b.on('pointerdown', (pointer) => {
	console.log('Huevo blanco');
	});

	huevo_m.on('pointerdown', (pointer) => {
	console.log('Huevo Marron');
	});

	huevo_d.on('pointerdown', (pointer) => {
	console.log('Huevo Dorado');
	});

huevo_b = this.input.on('drag', function (pointer, huevo_b, x, y) { huevo_b.x = x;
huevo_b.y = y;
huevo_b.setScale(1.4);

if (Phaser.Geom.Intersects.RectangleToRectangle(huevera_b.getBounds(), huevo_b.getBounds())){
console.log("Huevo dentro de huevera!!!");
}
});

huevo_b = this.input.on('dragend', function (pointer, huevo_b, x, y)     {
huevo_b.setScale(1.1);
});
}

function actualiza ()
{
huevo_b.y -= dir_b;
huevo_m.y -= dir_m;
huevo_d.y -= dir_d;

if(huevo_b.y >= 400){
huevo_b.y = 50;
}
if(huevo_m.y >= 400){
huevo_m.y = 50;
}

if(huevo_d.y >= 400){
huevo_d.y = 50;
}
}

function actualiza_rect ()
{
	rect.x += rect_dir;
}
		</script>
	</head>
	<body>
	</body>
</html> 
